{% extends "base.html" %}

{% block title %}Aulas - {{ site_brand|default:"Academia Python" }}{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h1 class="display-5 fw-bold mb-3">Nuestras Aulas</h1>
                <p class="lead text-muted">
                    Espacios modernos y equipados para una experiencia de aprendizaje óptima
                </p>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a href="{% url 'base' %}" class="text-decoration-none">Inicio</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Aulas</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</section>

<!-- Filter Section -->
<section class="py-4 border-bottom">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="d-flex align-items-center gap-3">
                    <span class="text-muted">Filtrar por:</span>
                    <select class="form-select" style="width: auto;">
                        <option selected>Todas las aulas</option>
                        <option value="disponible">Disponibles</option>
                        <option value="ocupada">Ocupadas</option>
                        <option value="mantenimiento">En mantenimiento</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6 text-lg-end mt-3 mt-lg-0">
                <span class="text-muted">
                    Mostrando {{ aulas|length }} aula{{ aulas|length|pluralize:",s" }}
                </span>
            </div>
        </div>
    </div>
</section>

<!-- Classrooms Grid -->
<section class="py-5">
    <div class="container">
        {% if aulas %}
            <div class="row g-4">
                {% for aula in aulas %}
                <div class="col-lg-4 col-md-6">
                    <div class="card h-100 border-0 shadow-sm classroom-card">
                        <!-- Classroom Image -->
                        <div class="position-relative overflow-hidden" style="height: 200px;">
                            {% if aula.primera_foto %}
                                <img src="{{ aula.primera_foto.foto.url }}" 
                                     class="card-img-top h-100 w-100 object-fit-cover" 
                                     alt="{{ aula.nombre }}">
                            {% else %}
                                <div class="h-100 w-100 d-flex align-items-center justify-content-center bg-gradient"
                                     style="background: linear-gradient(135deg, var(--success-color) 0%, #047857 100%);">
                                    <i class="bi bi-door-open text-white display-3"></i>
                                </div>
                            {% endif %}
                            
                            <!-- Status Badge -->
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">
                                    <i class="bi bi-check-circle me-1"></i>Disponible
                                </span>
                            </div>
                            
                            <!-- Capacity Badge -->
                            {% if aula.capacidad_alumnos %}
                            <div class="position-absolute top-0 end-0 m-3">
                                <span class="badge bg-dark bg-opacity-75">
                                    <i class="bi bi-people me-1"></i>{{ aula.capacidad_alumnos }}
                                </span>
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- Classroom Content -->
                        <div class="card-body d-flex flex-column">
                            <div class="mb-3">
                                {% if aula.institucion %}
                                <span class="text-muted small">
                                    <i class="bi bi-building me-1"></i>{{ aula.institucion.nombre }}
                                </span>
                                {% endif %}
                            </div>
                            
                            <h5 class="card-title fw-bold mb-3">{{ aula.nombre }}</h5>
                            
                            {% if aula.descripcion %}
                            <p class="card-text text-muted mb-3 flex-grow-1">
                                {{ aula.descripcion|truncatewords:15 }}
                            </p>
                            {% endif %}
                            
                            <!-- Classroom Details -->
                            <div class="mb-3">
                                <div class="row g-2 text-center">
                                    {% if aula.capacidad_alumnos %}
                                    <div class="col-6">
                                        <div class="p-2 bg-light rounded">
                                            <i class="bi bi-people text-primary d-block"></i>
                                            <small class="text-muted">{{ aula.capacidad_alumnos }} personas</small>
                                        </div>
                                    </div>
                                    {% endif %}
                                    
                                    <div class="col-6">
                                        <div class="p-2 bg-light rounded">
                                            <i class="bi bi-gear text-info d-block"></i>
                                            <small class="text-muted">{{ aula.caracteristicas.count }} características</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Classroom Features -->
                            {% if aula.caracteristicas.all %}
                            <div class="mb-3">
                                <div class="d-flex flex-wrap gap-1">
                                    {% for caracteristica in aula.caracteristicas.all|slice:":3" %}
                                        {% if caracteristica.disponible %}
                                        <span class="badge bg-success bg-opacity-10 text-success">
                                            <i class="bi bi-check me-1"></i>{{ caracteristica.caracteristica.nombre }}
                                        </span>
                                        {% endif %}
                                    {% endfor %}
                                    {% if aula.caracteristicas.count > 3 %}
                                    <span class="badge bg-light text-muted">
                                        +{{ aula.caracteristicas.count|add:"-3" }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Action Buttons -->
                            <div class="mt-auto">
                                <div class="d-grid gap-2">
                                    <a href="{% url 'aula_detail' aula.id %}" 
                                       class="btn btn-primary">
                                        <i class="bi bi-eye me-2"></i>Ver Detalles
                                    </a>
                                    <button class="btn btn-outline-success btn-sm">
                                        <i class="bi bi-calendar-check me-1"></i>Reservar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <!-- Empty State -->
            <div class="row justify-content-center">
                <div class="col-lg-6 text-center">
                    <div class="py-5">
                        <i class="bi bi-door-open text-muted display-1 mb-4"></i>
                        <h3 class="fw-bold mb-3">No hay aulas disponibles</h3>
                        <p class="text-muted mb-4">
                            Actualmente no tenemos aulas registradas en el sistema.
                        </p>
                        <a href="{% url 'base' %}" class="btn btn-primary">
                            <i class="bi bi-house me-2"></i>Volver al Inicio
                        </a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</section>

<!-- Features Section -->
{% if aulas %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center mb-5">
                <h3 class="fw-bold mb-3">Características de Nuestras Aulas</h3>
                <p class="text-muted">Espacios diseñados para maximizar tu experiencia de aprendizaje</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="text-center">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="bi bi-laptop fs-3"></i>
                    </div>
                    <h5 class="fw-bold">Equipos Modernos</h5>
                    <p class="text-muted">Computadoras de última generación para todos los estudiantes</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="text-center">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="bi bi-wifi fs-3"></i>
                    </div>
                    <h5 class="fw-bold">Internet de Alta Velocidad</h5>
                    <p class="text-muted">Conexión rápida y estable para trabajar sin interrupciones</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="text-center">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="bi bi-display fs-3"></i>
                    </div>
                    <h5 class="fw-bold">Proyectores HD</h5>
                    <p class="text-muted">Pantallas de alta definición para seguir las clases cómodamente</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="text-center">
                    <div class="feature-icon mx-auto mb-3">
                        <i class="bi bi-thermometer-half fs-3"></i>
                    </div>
                    <h5 class="fw-bold">Clima Controlado</h5>
                    <p class="text-muted">Ambiente confortable durante todo el año</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
    .classroom-card {
        transition: all 0.3s ease;
    }
    
    .classroom-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }
    
    .object-fit-cover {
        object-fit: cover;
    }
</style>
{% endblock %}
